# 12 光源

为了让场景中的物体能被看见，必须有一个发光的源头，以便光能从这些源头反射到相机的传感器上。为此，本章首先展示Light接口，此接口允许定义各种类型的光源(阅读本章前，你可以复习章节4.4，此章节描述了发光的物理过程)

接着是一些实用光源的实现类。由于不同类型的光源的实现都隐藏在精心设计的接口下，所以在13到15章中，光传播的例程一般能在不知道具体光源类型的情况下进行操作，这类似于加速结构能在不知道具体表示的物体细节的情况下，持有不同类型的图元。

大部分种类的光源模型会在本章介绍，然而由于pbrt基于物理的设计，有一些种类会有轻微的限制。许多非物理的光源模型是为计算机图形学开发的，包含了比如:对光线随距离衰减的速率的控制;哪些物体会被光照到;哪些物体会根据光产生阴影等等。这一系列控制在基于物理的光传输算法中是不兼容的，因此，在此处的模型中不提供相关功能。

对此种照明控制产生的问题的例子如下，考虑一个没有影子产生的光源，到达物体表面的能量，随着添加更多的面，能量的增加是没有上限的。考虑一系列围绕在这种光源的同心球面，如果忽略遮挡关系，每增加一层球壳就会增加总的接收到的能量。这直接违反了关于到达物体表面光照的总能量是不能大于光源发出的能量总和的准则。

在有着许多光源的场景中，在每个需要着色顶点计算所有光源的光照是不太现实的。幸运的是，这是又一个可被随机处理掉的问题。给出一个合适的权重因子，所有光源光照效果的无偏估计就能用其中的一部分，甚至一个光源计算出来。本章的最后一节因此会介绍LightSampler, 此类定义了一个选取这种光源的接口，及其多个实现类。

## 12.1 Light接口

## 12.2 点光源

## 12.3 平行光

## 12.4 面光源

## 12.5 无限面积光源

## 12.6 光的采样