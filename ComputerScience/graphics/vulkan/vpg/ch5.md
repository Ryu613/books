# 第五章 呈现

1. 生成并处理图像，最终把结果展示给用户的过程，叫做呈现，但是由于不是所有应用都需要把图像输出给用户看，所以呈现不属于Vulkan的核心API
2. 呈现是被一组扩展支持，称为WSI扩展，在Vulkan中此种扩展必须显式启用，且每个平台稍有不同，需要根据平台来启用对应的扩展
3. Vulkan里的呈现是被一小组扩展来处理的。其功能在所有平台都是同一个扩展，这个扩展下，根据平台不同，又可细分为多个更小的根据平台区分的扩展

## 呈现界面(presentation surface)

1. surface即是vulkan对视窗概念的抽象，视窗内展示的内容是image经过绘制后的图片，这些图片一般来自于窗口系统，或者与窗口系统密切交互的部分里
2. 这些在窗口系统中要展示的，待绘制或是已绘制的image，放入一个对象，叫swapchain

## 交换链(swap chain)

1. VkSurfaceKHR用来处理某个视窗的视图，为了展示出界面中确切需要呈现的内容，需要创建一种特殊的图像，用来存储视窗里的数据。
2. 图像可以通过Vulkan直接创建一种叫image的对象，但是不方便管理，所以使用一种叫swapchain的对象来管理一个或多个图像对象
3. 交换链可对视窗系统请求创建多个图像，这种功能包含在扩展VK_KHR_swapchain中
4. 这些image对象，在交换链中，一般用ring buffer结构来组织
5. 应用可以请求交换链获取可用的图像，渲染到其上，然后把这个图像返还给交换链，等待展示，其他图像也可同时在绘制中

## 全屏界面

1. 把图像直接以全屏渲染并显示，此功能包含在VK_KHR_display和VK_KHR_display_swapchain扩展中。
2. 此扩展可根据不同平台，发现并获取显示设备的属性和模式等信息

## 呈现的执行

1. 呈现是一种指令，放在指令缓冲中，指令缓冲会提交给队列，队列执行指令后会把图像产出并呈现出来。不是所有队列都支持呈现，故使用队列时要先检查是否支持图像的呈现，通过vkGetPhysicalDeviceSurfaceSupportKHR()实现。
2. 某些队列有在视窗中呈现的能力，但是不能直接访问控制了全屏界面的物理硬件，因此，需要在surface传入你要呈现其上的surface

## 清理

通过vkDestroySwapchainKHR()销毁交换链