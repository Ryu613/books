# 第三章总结

## 齐次坐标变换

首先，我们可以定义一个坐标系统$(p_0,\vec{v}_1, \vec{v}_2, \vec{v}_3)$，p0为原点，向量v1,v2,v3就是坐标轴向量，对于这个坐标系任意一点，可表示为:

$$
[
\begin{matrix}
S_1 && S_2 && S_3 && 1
\end{matrix}
]
[
    \begin{matrix}
        \vec{v}_1 && \vec{v}_2 && \vec{v}_3 && p_o
    \end{matrix}
]^T
$$

其中S123是这个坐标系每个轴的坐标值，向量v123是坐标轴，po是权重，S后面的1代表这是一个点，若为0代表一个向量

从齐次坐标表示的点和向量式子，我们可以得知，对齐次坐标的点或向量做变换，就是对这个齐次坐标的基(坐标轴)做变换，因此，我们可以利用这个特性完成坐标系的变换过程

## lookat变换

就是相机空间和世界空间之间的变换过程，相机空间中，有up，right，view三个正交的向量代表相机空间的坐标系，根据用户给定的up和lookat，用叉乘就可以求得这三个向量，即可得知相机空间的三个坐标轴

根据齐次坐标变换可知，把相机空间转换到世界空间，或反之，即就是对这三个坐标基做转换，因此，我们可以得到变换矩阵，把相机空间转为世界空间:

$$\left[
    \begin{matrix}
        right.x && up.x && view.x && pos.x\\
        right.y && up.y && view.y && pos.y\\
        right.z && up.z && view.z && pos.z\\
        0 && 0 && 0 && 1
    \end{matrix}
\right]
$$

在此处，我们假设相机空间是左手坐标系。进一步可知，若要把世界空间转换回相机空间，变换矩阵即为此矩阵的逆矩阵

## 点和向量的坐标系变换

### 点

把一个点从一个坐标系变换到另一个坐标系，就是变换矩阵与这个点的齐次坐标$[x\,y\,z\,1]^T$做叉乘得出来的矩阵，里面的分量就是新坐标下的值

### 向量

同理，向量的齐次坐标为$[x\,y\,z\,0]^T$,变换矩阵叉乘向量的齐次坐标就完成了变换过程
