# 第七章 图形管线

此章为重点章节，已对其进行全文翻译，[译文在此](ch7_translate.md)

此处对其进行进一步总结

## 逻辑图形管线

逻辑图形管线就是指Vulkan生成图像过程的处理流程在逻辑上的结构，此种逻辑的实现是在VkGraphicsPipeline类中。

管线其实就是流程的意思，流程分为多个步骤，每个步骤之间首尾相接，上个步骤的输出对应下个步骤的输入。有些步骤是可选的，有些步骤是必须的，某些步骤你可以通过编程去自定义，某些步骤却不行

![图7.1](img/fg7_1.png)

图形管线要执行，需要定义每个步骤输入输出的数据格式和步骤，这是通过称为renderpass的对象实现的，每个renderpass有>=1个subpass，每个subpass对应一个或多个graphics pipeline

图形管线中，最重要的阶段就是顶点着色阶段，这个阶段负责把顶点数据输入并处理，最简单的图形管线也至少必须有一个顶点着色阶段

## 渲染通道(renderpass)

管线只负责把顶点按要求处理"一趟",有时候处理一趟没法最终生成图像，器上有个更大的概念叫renderpass，代表了生成图片的整个过程，这个过程又可分为多个subpass（子过程），一个子过程可对应一个或多个管线。每个过程需要定义这些管线输入输出数据的格式标准。

在绘制操作开始前，必须有一个renderpass

## 帧缓冲(framebuffer)

就是图形管线的渲染目标，这个缓冲里面就是一组图像，管线就在这些图像上"绘画"

## 流程
