= 第三章 接口

== 重点

. 少用全局变量，若有，尽量使其不可变(const/constexpr)
. 避免单例，用依赖注入代替
. 接口的命名和参数名应该能望文生义,参数数量尽量少，类型尽量精确
. 多用Pimpl，保证ABI稳定

== I2: 全局变量尽量const

== I3: 避免单例

问题：
* 不方便单元测试
* 单例的归属不明确，谁来负责销毁？
* 如何实现线程安全?
* 初始化顺序谁负责？

解决： 用依赖注入代替

== I13: 不要用单个指针传递数组

多用stl中提供的容器类型传递参数，避免参数错误导致比如数组越界等错误

== I27: 多用Pimpl，来保证ABI稳定