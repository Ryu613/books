# ç‰©ç†å¼æ¸²æŸ“æŠ€æœ¯-ä»æ–°æ‰‹åˆ°ä¸“å®¶

## 1 æ¦‚è¿°

æœ¬æ–‡ä¼šä»¥å®è·µå‹å­¦ä¹ æ–¹æ³•ï¼šä»æ–°æ‰‹åˆ°å­¦å¾’ï¼Œè€Œä¸æ˜¯ä»ç†è®ºåˆ°å®è·µçš„æ–¹æ³•æ¥ä»‹ç»ç‰©ç†å¼æ¸²æŸ“æŠ€æœ¯ï¼Œç›¸å…³ç†è®ºä¼šåœ¨å®è·µä¸­ç©¿æ’ï¼Œä¸”æ·±åº¦ä¼šåˆ†é˜¶æ®µè¿›è¡Œæ·±å…¥å’Œæ›´æ–°

æ–‡ç« å¤§æ¦‚ä¼šä»¥ æ–°æ‰‹ -> å­¦å¾’ -> è€æ‰‹ -> ä¸“å®¶æ¥åŒºåˆ†ç†è®ºå’Œå®è·µæ°´å¹³

æœ¬æ–‡é¢„æœŸè¯»è€…(è‹¥æœ‰ğŸ˜‚)ä¸ºå…·æœ‰è®¡ç®—æœºç¨‹åºå¼€å‘èƒ½åŠ›ï¼Œä¸”å¯¹è®¡ç®—æœºå›¾å½¢æ¸²æŸ“æ„Ÿå…´è¶£çš„äººã€‚

æœ¬æ–‡åˆ°ä¸­åæœŸæ˜¯æœ‰éš¾åº¦çš„ï¼Œè¯·åšå¥½å¿ƒç†å‡†å¤‡ã€‚å¸Œæœ›è½»æ¾ä½“éªŒçš„è¯»è€…å¯ä»¥å…ˆè€ƒè™‘ä»¥RayTracingInOneWeekendç³»åˆ—æ¥å…¥é—¨

è¯»å®Œæœ¬æ–‡çš„è¯»è€…ï¼Œåº”è¯¥èƒ½äº†è§£ç‰©ç†å¼æ¸²æŸ“çš„åŸºç¡€ç†è®ºï¼Œå¹¶ä¸”å®ç°ç‰©ç†å¼æ¸²æŸ“ï¼Œæœ€ç»ˆç”Ÿæˆè¾ƒä¸ºé€¼çœŸçš„å›¾åƒ

æ–‡å­—å°½é‡ç®€å•æ˜“æ‡‚ã€‚æœŸæœ›èƒ½åœ¨æé«˜ä¿¡æ¯è´¨é‡çš„åŒæ—¶ï¼Œå¢åŠ ä¿¡æ¯å¯†åº¦ï¼Œå‡å°‘é˜…è¯»æ—¶é—´ï¼Œé™ä½ç†è§£éš¾åº¦ï¼Œæœ€ç»ˆæé«˜é˜…è¯»æ•ˆç‡å’Œæ•ˆæœ

æœ¬æ–‡é¢„æœŸæ˜¯é•¿æœŸå·¥ç¨‹ï¼Œç›®å‰å°šæœªå®Œæˆï¼Œä½†ä¼šå°½é‡ä¿è¯å†…å®¹è®©è¯»è€…æœ‰æ‰€æ”¶è·ï¼Œæˆ‘ä¼šåœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œä¸æ–­ä¿®æ”¹å®Œå–„

### 1.1 é˜…è¯»é¡»çŸ¥

1. é˜…è¯»æœ¬æ–‡å‰ï¼Œè¯»è€…éœ€è¦äº†è§£è®¡ç®—æœºå›¾å½¢å­¦ï¼ŒC++ï¼Œæ•°å­¦(å¾®ç§¯åˆ†ï¼Œçº¿æ€§ä»£æ•°)ï¼Œè‹¥äº†è§£æ¦‚ç‡è®ºç»Ÿè®¡å­¦å’Œç‰©ç†å­¦æ›´ä½³
2. ç”±äºç‰©ç†å¼æ¸²æŸ“æ¶‰åŠçš„çŸ¥è¯†æ¨ªè·¨å¤šä¸ªå­¦ç§‘ï¼Œä¸ºé¿å…æ­§ä¹‰ï¼Œæœ¬æ–‡æ‰€æœ‰åè¯å’Œç›¸å…³è§£é‡Šï¼Œçš†ä»¥è®¡ç®—æœºå›¾å½¢å­¦ä¸ºè¯­å¢ƒã€‚
3. å†™ä½œä¸æ˜“ï¼Œç”±äºæœ¬äººæ°´å¹³æœ‰é™ï¼Œè‹¥æœ‰é”™è¯¯ï¼Œè¯·ç›´æ¥è”ç³»æˆ‘

### 1.2 ä»€ä¹ˆæ˜¯æ¸²æŸ“ï¼Ÿ

ç”¨è®¡ç®—æœºç¨‹åºæŠŠäºŒç»´æˆ–ä¸‰ç»´æ¨¡å‹çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¹¶æœ€ç»ˆç”ŸæˆäºŒç»´å›¾åƒçš„è¿‡ç¨‹ã€‚

åŠ¨ç”»çš„æœ¬è´¨å°±æ˜¯è¶³å¤Ÿå¿«ä¸”è¿ç»­åœ°æ’­æ”¾è¿™äº›æ¸²æŸ“åçš„å›¾åƒï¼Œè®©äººçœ¼çœ‹ä¸Šå»åœ¨åŠ¨ã€‚

### 1.3 ä»€ä¹ˆæ˜¯åŸºäºç‰©ç†çš„æ¸²æŸ“?

åŸºäºç‰©ç†çš„æ¸²æŸ“(è‹±æ–‡ç¼©å†™ä¸ºpbr(Physically Based Rendering))ï¼Œä¸»è¦ç›®çš„æ˜¯åˆ©ç”¨ç‰©ç†å­¦ç†è®ºï¼Œä½¿æ¸²æŸ“å‡ºæ¥çš„å›¾ç‰‡è·Ÿç…§ç‰‡ä¸€æ ·çœŸå®ã€‚

è€ŒçœŸå®æ„Ÿçš„æ¥æºï¼Œæœ€ä¸»è¦çš„ä¸€éƒ¨åˆ†å°±æ˜¯æ¨¡æ‹Ÿç°å®ä¸­å…‰çš„ä¼ æ’­å’Œä¸ç‰©ä½“ä½œç”¨çš„è¿‡ç¨‹ã€‚

### 1.4 åŸºäºå“ªäº›ç‰©ç†å­¦ç†è®ºï¼Ÿ

ä¸¥æ ¼æ¥è®²ï¼Œpbrçš„å®ç°å…¶å®å¹¶ä¸å®Œå…¨éµå¾ªç‰©ç†å­¦ç†è®ºï¼Œè€Œæ˜¯æ ¹æ®äººçœ¼å¯¹å›¾åƒæœ‰é™çš„åˆ†è¾¨èƒ½åŠ›å’Œè®¡ç®—æœºçš„æœ‰é™çš„è®¡ç®—èƒ½åŠ›ï¼Œåœ¨è®¡ç®—æ–¹æ³•å’Œæ–¹å¼ä¸Šåšäº†å¾ˆå¤šæŠ˜è¡·ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥è¯´pbråœ¨ç†å¿µä¸Šæ˜¯åŸºäºç‰©ç†å­¦çš„

æœ¬æ–‡æ‰€æè¿°çš„pbråªæ˜¯å…¶ç†å¿µçš„ä¸€ç§å®ç°æ–¹å¼ï¼Œè¿™ç§pbrå®ç°ä¸»è¦æ¶‰åŠçš„ç‰©ç†ç†è®ºå¦‚ä¸‹:

- **å…‰å­¦**ï¼šå¯¹åº”å‡ ä½•å…‰å­¦çš„éƒ¨åˆ†ç†è®ºï¼Œpbrç”¨æ­¤ç†è®ºæè¿°å…‰çš„ä¼ æ’­å’Œäº¤äº’è¿‡ç¨‹ã€‚
  - åœ¨pbrä¸­ï¼Œå‡è®¾å…‰æ²¿ç›´çº¿ä¼ æ’­ï¼Œå¹¶ä¸”å¿½ç•¥å…‰çš„æ³¢åŠ¨æ€§ï¼Œåªè€ƒè™‘å…‰çš„ç²’å­æ€§ï¼Œä¸»è¦å…³æ³¨å…‰åœ¨çœŸç©ºæˆ–ä»‹è´¨ä¸­ä¼ æ’­ç°è±¡ï¼Œå’Œå…‰ä¸ä¸åŒç‰©ä½“ä¹‹é—´çš„ä½œç”¨ç°è±¡(æ¯”å¦‚æ•£å°„ï¼ŒæŠ˜å°„ï¼Œåå°„ç­‰)ã€‚åŒæ—¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸»è¦å…³æ³¨å…‰çš„å®è§‚å°ºåº¦ç°è±¡ï¼Œå¿½ç•¥å¾®è§‚å°ºåº¦ç°è±¡
- **è¾å°„åº¦é‡å­¦**: ç”±äºå…‰æ˜¯ç”µç£è¾å°„çš„ä¸€ç§å½¢å¼ï¼Œpbråˆ©ç”¨æ­¤å­¦ç§‘ç”¨äºè¡¡é‡è¾å°„èƒ½é‡åœ¨ä¼ æ’­å’Œä¸ç‰©ä½“çš„ä½œç”¨çš„è¿‡ç¨‹ä¸­ï¼Œèƒ½é‡çš„å˜åŒ–æƒ…å†µã€‚å¾—åˆ°çš„å„ç§ç‰©ç†é‡åç»­ä¼šè¢«ç”¨æ¥è®¡ç®—å¯¹åº”çš„é¢œè‰²ç‰¹å¾ç­‰æ•°æ®
- **è‰²åº¦å­¦**ï¼š ä»»ä½•è‰²å½©çš„æ˜¾ç¤ºï¼Œå®é™…ä¸Šéƒ½æ˜¯å…‰åˆºæ¿€äººç±»çš„è§†è§‰ç¥ç»è€Œäº§ç”Ÿçš„æ„Ÿè§‰ï¼Œè‰²åº¦å­¦ç ”ç©¶å…‰å¯¹åº”äººçœ¼çš„è‰²å½©çš„æ„ŸçŸ¥å…³ç³»ã€‚pbråˆ©ç”¨æ­¤å­¦ç§‘æ¥æŠŠè¾å°„èƒ½è½¬æ¢ä¸ºäººç±»è§‚å¯Ÿåˆ°çš„é¢œè‰²ç‰¹å¾
- **å…‰åº¦å­¦**ï¼š æ­¤å­¦ç§‘æè¿°å…‰çš„å„ç§ç‰©ç†ç‰¹å¾ã€‚pbråˆ©ç”¨æ­¤å­¦ç§‘æè¿°å…‰çš„å„ç§ç‰©ç†é‡

ä»¥ä¸Šè¿™äº›çŸ¥è¯†ä¹Ÿä¼šæ¶‰åŠåˆ°æ•°å­¦ä¸Šçš„å‡ ä½•ï¼Œçº¿æ€§ä»£æ•°ï¼Œå¾®ç§¯åˆ†ï¼Œå’Œæ¦‚ç‡è®ºç»Ÿè®¡å­¦çŸ¥è¯†ã€‚

æœ¬æ–‡è®¨è®ºçš„pbrå®ç°ä¸­ï¼Œå¯¹è¿™äº›ç‰©ç†ç›¸å…³ç†è®ºçš„åº”ç”¨ä¸æ·±ï¼Œè¯»è€…åªéœ€äº†è§£é«˜ä¸­ç‰©ç†çŸ¥è¯†ï¼ŒåŒæ—¶çœ‹å¾—æ‡‚å¾®ç§¯åˆ†æ–¹ç¨‹ï¼ŒçŸ¥é“å‘é‡ï¼ŒçŸ©é˜µçš„å«ä¹‰å’ŒåŸºæœ¬è®¡ç®—è§„åˆ™å³å¯ã€‚

å…³äºè®¡ç®—æœºçš„æˆåƒåŸç†ï¼Œå›¾å½¢çš„æè¿°ï¼Œæ˜¾ç¤ºç­‰ç›¸å…³çŸ¥è¯†è¯·å‚è€ƒå›¾å½¢å­¦ä¹¦ç±

### 1.5 ä»€ä¹ˆæ˜¯å…‰çº¿è¿½è¸ª(ray tracing)

**å…‰çº¿è¿½è¸ª**ï¼šç”¨ç‰©ç†æ–¹æ³•æ¨¡æ‹Ÿå…‰çº¿ä¼ æ’­å’Œä¸ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ä½“ä½œç”¨è¿‡ç¨‹çš„ä¸€ç§ç®—æ³•ã€‚åœ¨å…‰çº¿è¿½è¸ªçš„è¿‡ç¨‹ä¸­ä¼šè®¡ç®—å‡ºå…‰çš„å¤šä¸ªç›¸å…³çš„ç‰©ç†é‡ã€‚

å¯¹åº”çš„(è½¯ä»¶æˆ–ç¡¬ä»¶)æ¨¡å—å°±å«åšå…‰çº¿è¿½è¸ªå™¨(ray tracer)

pbrç›®å‰å‡ ä¹éƒ½æ˜¯åˆ©ç”¨å…‰çº¿è¿½è¸ªå™¨å®ç°çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…‰çº¿è¿½è¸ªæ˜¯pbrçš„ä¸€ç§ä¸»è¦çš„ï¼Œç›®å‰ä¹Ÿæ˜¯é»˜è®¤çš„æŠ€æœ¯å®ç°æ–¹æ³•ã€‚

### 1.6 å¦‚ä½•å®ç°å…‰çº¿è¿½è¸ªï¼Ÿ

ç°å®ä¸­æ‹æ‘„ç…§ç‰‡æˆ–è€…äººçœ¼çš„è§‚å¯Ÿï¼Œéƒ½æ˜¯ç›¸æœºæˆ–äººçœ¼å¯¹è§‚å¯Ÿçš„ç‰©ä½“çš„å…‰çš„ä¿¡æ¯è¿›è¡Œäº†æ•è·å’Œå¤„ç†ã€‚è¦æ¨¡æ‹ŸçœŸå®æƒ…å†µï¼Œå°±å¯ä»¥æ ¹æ®åœ¨ç°å®ä¸­è§‚å¯Ÿæˆ–æ‹æ‘„è¿‡ç¨‹æ¶‰åŠåˆ°çš„äº‹ç‰©å’Œå…¶è”ç³»è¿›è¡Œæ¦‚å¿µæŠ½è±¡ï¼Œåˆ©ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ–¹æ³•ï¼Œè½¬æ¢ä¸ºå„ç§ç±»ï¼Œç„¶ååœ¨è¿™äº›ç±»ä¸­åšè°ƒç”¨å’Œè®¡ç®—ï¼Œæœ€ç»ˆå®ç°å…‰çº¿è¿½è¸ªã€‚

ç”±äºè®¡ç®—æœºæ€§èƒ½æœ‰é™ä¸”å­˜åœ¨è¯¯å·®ï¼Œéœ€è¦å¯¹å¤„ç†å’Œè®¡ç®—è¿‡ç¨‹åšå¤§é‡ç²¾ç®€å’Œä¼˜åŒ–ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œæ¸²æŸ“çš„å›¾ç‰‡è¶ŠçœŸå®ï¼Œå°±éœ€è¦æ›´å¤šçš„è®¡ç®—å’Œå¤„ç†ï¼Œè®¡ç®—æœºçš„æ€§èƒ½æ¶ˆè€—å°±è¶Šå¤§ï¼Œæ¸²æŸ“æ‰€éœ€æ—¶é—´ä¹Ÿè¶Šé•¿ã€‚

### 1.7 ç°å®ä¸­çš„è§‚å¯Ÿè¿‡ç¨‹

> todo: å¯¹ç°å®ä¸­å…³é”®äº‹ç‰©æŠ½è±¡åŠå…¶è”ç³»è¿›è¡Œä»‹ç», å»ºæ¨¡ç”»å›¾

## 2 å®ç°

## 2.1 å…¥é—¨çº§

> å…‰è¿½æœ€ç®€å»ºæ¨¡ï¼šç‚¹å…‰æºï¼Œç‰©ä½“(æ¼«åå°„çƒä½“) ç›¸æœº(é€è§†)
>
> åœºæ™¯ï¼š ä¸€ä¸ªçƒï¼Œæ ¹æ®å…‰æºå…‰ç…§æ–¹å‘ï¼Œå¸¦ç‰¹å®šé¢œè‰²çš„æ¸å˜

## 2.2 æ–°æ‰‹çº§

> å…¥é—¨çº§è¿½åŠ ï¼šç‰©ä½“(æè´¨(æ¼«åå°„ï¼Œç”µå¯¼ä½“)ï¼Œç«‹æ–¹ä½“)ï¼Œç›¸æœº(é•œå¤´)
>
> åœºæ™¯ï¼š ç®€å•å…‰çº¿è¿½è¸ªï¼Œé’ˆå­”ç›¸æœºï¼Œå•è‰²çƒä½“ï¼Œæ˜æš—å’Œé®æŒ¡è¡¨ç°

## 2.3 å­¦å¾’çº§

> ç®€å•è·¯å¾„è¿½è¸ª: ç‚¹å…‰æºï¼Œè¿›é˜¶ç›¸æœºæ¨¡å‹(é•œç‰‡ï¼Œèƒ¶ç‰‡)ï¼Œç‰©ä½“å‡ ç§ç®€å•æè´¨ï¼ŒRGBè‰²å½©ç©ºé—´

## 2.4 è€æ‰‹çº§

> è¿›é˜¶è·¯å¾„è¿½è¸ª: LTE, å…‰è°±å»ºæ¨¡ï¼Œé‡‡æ ·å™¨ï¼Œé¢å…‰æºï¼Œç‰©ä½“çº¹ç†ï¼ŒBSDFï¼Œè¿›é˜¶ç›¸æœºæ¨¡å‹(æ»¤æ³¢å™¨),å¤šçº¿ç¨‹ï¼Œåœºæ™¯åŠ è½½ï¼Œè¿è¡Œæ•ˆç‡ä¼˜åŒ–ï¼Œè°ƒè¯•ï¼Œæ—¥å¿—åŠŸèƒ½
>
> è·¯å¾„è¿½è¸ªåŠå…¶ä¼˜åŒ–ï¼Œvulkanè·¯å¾„è¿½è¸ª, å®æ—¶å…‰è¿½, GPUï¼Œå¤šçº¿ç¨‹ï¼Œä¼˜åŒ–ï¼ŒFalcur/Filament/UEä»£ç è§£è¯»

## 2.5 ä¸“å®¶çº§

> ä»‹è´¨ï¼Œä½“æ¸²æŸ“ï¼ŒGPUç¼–ç¨‹ï¼ŒMLTï¼Œç¥ç»ç½‘ç»œæ¸²æŸ“ï¼Œå¼€æºé¡¹ç›®è§£è¯»ï¼Œæ–°æŠ€æœ¯è§£è¯»

## 2.6 å¤§å¸ˆ

> é‡å­è®¡ç®—æ¸²æŸ“ï¼ŒAIæ¸²æŸ“ï¼Œéçº¿æ€§ç©ºé—´ï¼Œè¿›é˜¶ç‰©ç†å»ºæ¨¡ï¼Œé«˜çº§æ•°å­¦ç†è®ºåœ¨å›¾å½¢å­¦ä¸­çš„åº”ç”¨ï¼Œæ–°å›¾å½¢å­¦æ€è·¯

1. [Physically Based Rendering From Theory To Implementation 4ed](https://www.pbr-book.org/4ed/contents)
2. [erobert: ray-tracing](https://cs.stanford.edu/people/eroberts/courses/soco/projects/1997-98/ray-tracing/index.html)
3. [papalqiï¼šå…‰çº¿è¿½è¸ªä»‹ç»](https://zhuanlan.zhihu.com/p/72673165)
4. [Wentao.Wang: pbr rendering](https://segmentfault.com/a/1190000000526976)
